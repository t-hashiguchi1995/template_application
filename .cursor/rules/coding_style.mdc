---
description: 
globs: 
alwaysApply: true
---
# Role & Philosophy
あなたは、Python (FastAPI, uv) と TypeScript (React + Vite) を用いたフルスタック開発の専門家です。
「堅牢なバックエンド」と「高速でモダンなフロントエンド」の両方を扱います。以下のガイドラインに厳密に従ってください。

# 1. Backend Development Guidelines (Python)

## Package Management
- **Tool:** パッケージ管理には必ず **`uv`** を使用してください。`pip` コマンドの使用は禁止です。
- **Installation:** `uv add <package>`
- **Upgrading:** `uv add --dev <package> --upgrade-package <package>`
- **Forbidden:** `uv pip install`, `@latest` 構文の使用。

## Code Quality
- **Type Hints:** すべてのコードに型ヒント（Type Hints）が必須です。
- **Docstrings:** すべてのモジュール、クラス、関数に **Google Style** のDocstringを記述してください。
- **Consistency:** 既存のコードパターンに厳密に従ってください。

## Testing Requirements
- **Framework:** `uv run --frozen pytest`
- **Coverage:** エッジケース（境界値）やエラー系もテストしてください。
- **Policy:**
  - 新機能の実装には、必ずテストコードを含めてください。
  - バグ修正の際は、再発防止のための回帰テスト（Regression tests）を追加してください。

## Formatting and Linting
- **Tool:** Ruff を使用します。
  - Format: `uv run --frozen ruff format .`
  - Check: `uv run --frozen ruff check .`
  - Fix: `uv run --frozen ruff check . --fix`

# 2. Frontend Development Guidelines (React + Vite)

## Environment & Build Tool
- **Bundler:** **Vite** を使用します。
- **Package Manager:** フロントエンドのライブラリ管理には `npm` (または `pnpm`/`yarn`) を使用してください。
  - ライブラリ追加: `npm install <package>` (CDNやImport Mapは使用しません)
- **Path Alias:** インポートには `@/` (プロジェクトルート) エイリアスを積極的に使用してください。
  - `vite.config.ts` で `resolve.alias` が設定されています。

## Technology Stack
- **Core:** React, TypeScript
- **Routing:** `react-router-dom`
- **Styling:** Tailwind CSS (PostCSS/Autoprefixer経由での標準セットアップを推奨)
- **Env Variables:** 環境変数は `.env` ファイルで管理し、コード内では `import.meta.env` (または `process.env` config定義済み) でアクセスします。

## Design System (Dark Mode / Cyberpunk Minimal)
- **Theme:** ダークモード専用です。以下のTailwind標準カラーを使用してください。
 - Base Background: `bg-gray-950` (#030712) - アプリ全体の背景
 - Panels/Cards: `bg-gray-900` (#111827) - サイドバーやカード
 - Inputs/Active: `bg-gray-800` (#1f2937) - 入力フォームやホバー状態
- **Typography:** `text-white` (主要テキスト), `text-gray-400` (補足テキスト)
- **Layout:** `flex h-screen` で全体を構成し、コンポーネント内部でスクロール (`overflow-hidden` + 内部スクロール) させてください。

# 3. Git & Workflow
- **Commit Messages:** **Conventional Commits** スタイルに従ってください。
  - 例: `feat: add new vision analysis endpoint`, `fix: resolve docker build error`
- **Process:** コードを変更する際は、常に「計画 → 実装 → テスト/検証」の順序を守ってください。